<!DOCTYPE html>
<html>
<head>
    <title>模拟</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/highcharts.js"></script>
</head>
<body>

<div class="container-fluid">
    <h1 align="center">简单传输码模拟</h1>
    <hr/>
    <div class="row">
        <!--波形位置-->
        <div id="g" class="col-sm-8" style="width: 550px; height: 400px; margin: 0 auto"></div>

        <div class="col-sm-4">选项位置</div>
    </div>
    <br><br>
    <div class="row">
        <div class="col-sm-2"></div>
        <div class="col-sm-8">
        <div class="input-group mb-3">
            <input type="text" class="form-control" placeholder="输入序列">
            <button type="submit" class="btn btn-primary">按钮</button>
        </div>
        </div>
        <div class="col-sm-2"></div>
    </div>

</div>
<script language="JavaScript">
    $(document).ready(function() {
        var chart = {
            type: '',
            animation: Highcharts.svg,
            marginRight: 10,
            events: {
                // load: function () {
                //     var series = this.series[0];
                //     setInterval(function () {
                //         var x = (new Date()).getTime(),
                //             y = 1;
                //         series.addPoint([x, 1], true, true);
                //         series.addPoint([x, 1], true, true);
                //     }, 1000);
                // }
                load: function () {
                    var series = this.series[0];
                    setInterval(function () {
                        var x = (new Date()).getTime();
                        series.addPoint([x, count], true, true);

                    }, 1000);
                }
            }
        };
        var title = {
            text: '单极性NRZ码'
        };
        var xAxis = {
            type: 'datetime',
            tickPixelInterval: 150
        };
        var yAxis = {
            title: {
                text: '电平'
            },
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        };
        var tooltip = {};
        // var tooltip = {
        //     formatter: function () {
        //         return '<b>' + this.series.name + '</b><br/>' +
        //             Highcharts.dateFormat('%Y-%m-%d %H:%M:%S', this.x) + '<br/>' +
        //             Highcharts.numberFormat(this.y, 2);
        //     }
        // };
        var plotOptions = {
            area: {
                pointStart: 1940,
                marker: {
                    enabled: false,
                    symbol: 'circle',
                    radius: 2,
                    states: {
                        hover: {
                            enabled: true
                        }
                    }
                }
            }
        };
        var legend = {
            enabled: false
        };
        var exporting = {
            enabled: false
        };
        var series= [{
            name: 'Random data',
            data: (function () {
                var data = [],time = (new Date()).getTime(),i;
                for (i = -19; i <= 0; i += 1) {
                    data.push({
                        x: time + i * 1000,
                        y: 0
                        // x: time + i * 1000,
                        // y: Math.random()
                    });
                }
                return data;
            }())
        }];

        var json = {};
        json.chart = chart;
        json.title = title;
        json.tooltip = tooltip;
        json.xAxis = xAxis;
        json.yAxis = yAxis;
        json.legend = legend;
        json.exporting = exporting;
        json.series = series;
        json.plotOptions = plotOptions;


        Highcharts.setOptions({
            global: {
                useUTC: false
            }
        });
        $('#g').highcharts(json);
        var otxt=document.getElementById("in");
        var oshow=document.getElementById("sh");
        var count=0;
        otxt.oninput=function(){
            count=count+1;
            oshow.innerHTML=count;
            // series = this.series[0];
            // series.addPoint([count, 100*count]);
            chart.series[0].addPoint(Math.random() * 100, true, true,true);
        }
    });
</script>
</body>
</html>