<!DOCTYPE html>
<html>
<head>
    <title>模拟</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/highcharts.js"></script>
</head>
<body>

<div class="container-fluid">
    <h1 align="center">简单传输码模拟</h1>
    <hr/>
    <div class="row">
        <!--波形位置-->
        <div id="g" class="col-sm-8" style="width: 550px; height: 400px; margin: 0 auto"></div>

        <div id="sh" class="col-sm-4">选项位置</div>
    </div>
    <br><br>
    <div class="row">
        <div class="col-sm-2"></div>
        <div class="col-sm-8">
            <div class="input-group mb-3">
                <input id="in" type="text" class="form-control" placeholder="输入序列">
                <button type="submit" class="btn btn-primary">按钮</button>
            </div>
        </div>
        <div class="col-sm-2"></div>
    </div>

</div>
<script language="JavaScript">
    $(document).ready(function() {
        var flag = 0;
        var chart = {
            type: 'scatter',
            margin: [70, 50, 60, 80],
            events: {
                // click: function (e) {
                //     // find the clicked values and the series
                //     var x = e.xAxis[0].value,
                //         y = e.yAxis[0].value,
                //         series = this.series[0];
                //     // Add it
                //     series.addPoint([x, y]);
                // }
                load: function () {
                    var series = this.series[0];
                    setInterval(function () {
                        if(flag == 1){
                            series.addPoint([count*10, 40],true,true);
                            flag = 0;
                        }
                    }, 100);
                }
            }
        };
        var title = {
            text: 'User supplied data'
        };
        var subtitle = {
            text: 'Click the plot area to add a point. Click a point to remove it.'
        };
        var xAxis = {
            gridLineWidth: 1,
            minPadding: 0.2,
            maxPadding: 0.2,
            maxZoom: 60
        };
        var yAxis = {
            title: {
                text: 'Value'
            },
            minPadding: 0.2,
            maxPadding: 0.2,
            maxZoom: 60,
            plotLines: [{
                value: 0,
                width: 1,
                color: '#808080'
            }]
        };
        var legend = {
            enabled: false
        };
        var exporting = {
            enabled: false
        };
        var plotOptions = {
            series: {
                lineWidth: 1,
                point: {
                    events: {
                        'click': function () {
                            if (this.series.data.length > 1) {
                                this.remove();
                            }
                        }
                    }
                }
            }
        };

        var series= [{
            // data: [[20, 20], [80, 80]]
            data: (function () {
                var data = [],i;
                for (i = 0; i < 20; i += 1) {
                    data.push({
                        x: i,
                        y: 0
                        // x: time + i * 1000,
                        // y: Math.random()
                    });
                }
                return data;
            }())
        }];


        var json = {};
        json.chart = chart;
        json.title = title;
        json.subtitle = subtitle;
        json.xAxis = xAxis;
        json.yAxis = yAxis;
        json.legend = legend;
        json.exporting = exporting;
        json.series = series;
        json.plotOptions = plotOptions;
        $('#g').highcharts(json);
        var otxt=document.getElementById("in");
        var oshow=document.getElementById("sh");
        var count=0;
        otxt.oninput=function(){

            count=count+1;
            oshow.innerHTML=count;
            flag = 1;
            // series = this.series[0];
            // series.addPoint([count, 100*count]);
            // chart.series[0].addPoint([count, 1]);
        }
    });
</script>
</body>
</html>